var Request=function(t){"use strict";const e={};class s{constructor(t,e,s){this.data=this.parseResponse(t.response),this.status=t.status,this.statusText=t.statusText,this.headers=this.parseHeaders(t.getAllResponseHeaders().split("\n")),this.request=t,this.config=e,this.isSuccess=s}parseResponse(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}parseHeaders(t){return t.reduce((t,e)=>{const s=e.split(":",2),r=s[0].trim().toLocaleLowerCase(),n=s[1]?s[1].trim():"";return r&&(t[r]=t[r]?`${t[r]}, ${n}`:n),t},{})}}class r extends Error{constructor(t,e,s,r){super(t),this.config=e,this.code=s,this.request=r}}function n(t,e){const s=[];for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];Array.isArray(r)?t+="[]":r=[r];for(let e of r)null!=e&&(e instanceof Date&&(e=e.toISOString()),s.push(`${t}=${encodeURIComponent(e.toString())}`))}return s.length?t+(-1===t.indexOf("?")?"?":"&")+s.join("&"):t}return t.setDefaultHeaders=function(t){Object.keys(t).forEach(s=>{e[s]=t[s]})},t.Response=s,t.buildUrl=n,t.request=function(t,o,i={}){return new Promise((a,u)=>{let c=new XMLHttpRequest;const l=Object.assign({},e,i.headers);c.open(t,i.params?n(o,i.params):o,!0),c.onload=(()=>{c&&(a(new s(c,i,200<=c.status&&c.status<300)),c=null)}),c.onerror=(()=>{c&&(u(new r("Network Error",i,null,c)),c=null)}),c.ontimeout=(()=>{c&&i.timeout&&(u(new r(`Timeout of ${i.timeout} ms exceeded`,i,"ECONNABORTED",c)),c=null)});for(const t in l)l.hasOwnProperty(t)&&c.setRequestHeader(t,l[t]);i.timeout&&(c.timeout=i.timeout);let p=i.data;"object"==typeof p&&"application/json;charset=UTF-8"===l["Content-Type"]&&(p=JSON.stringify(p)),c.send(void 0!==p?p:null)})},t}({});
